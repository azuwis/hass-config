<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Speech</title>
  </head>
  <body>
    <button id="listen" onclick="recognition.start()">listen</button><br>
    state <input id="state" type="text" value="idle" /><br>
    text <input id="text" type="text" value="" />
    <script>
      var text = document.querySelector('#text');
      var state = document.querySelector('#state');

      var recognition = new webkitSpeechRecognition();
      recognition.lang = 'cmn-Hans-CN';

      recognition.onaudiostart = function() {
        state.value = 'listening';
        text.value = '';
      }

      recognition.onaudioend = function() {
        state.value = 'idle';
      }

      recognition.onresult = function(event) {
        var result = event.results[0][0].transcript;
        text.value = result;
      }
    </script>
  </body>
</html>
